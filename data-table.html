<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>数据报表</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/user/navigator.css">
    <link rel="stylesheet" href="css/user/global.css">
</head>
<body>
<div class="container-fluid">
    <div class="header">
        <nav class=" navbar navbar-default navbar-fixed-top" id="top-navbar" role="navigation">
            <div class="navbar-brand">
                <a href="index.html">
                    <img src="images/logo.png" alt="Campus" class="img-responsive" height="30" width="120">
                </a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav pull-right">
                    <li class="dropdown user" id="header-user">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <img alt="" src="images/avatar3.jpg"/>
                            <span class="username">辅导员</span>
                            <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="#"><i class="fa fa-user"></i>用户信息</a></li>
                            <li><a href="#"><i class="fa fa-comment"></i>消息</a></li>
                            <li><a href="#"><i class="fa fa-eye"></i>预留</a></li>
                            <li><a href="login.html"><i class="fa fa-power-off"></i>注销</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
    <div class="main row">
        <div class="col-lg-2 left-part">
            <nav class="left-nav navbar-left col-md-12 " role="navigation">
                <a href="#base" class="nav-header menu-first collapse navbar-collapse" data-toggle="collapse"><i
                        class="fa fa-user"></i>&nbsp;个人信息</a>
                <ul class="nav nav-list collapse menu-second in" id="base">
                    <li role="presentation"><a href="perfect-information.html"><i class="fa fa-edit"></i>&nbsp;完善信息</a>
                    </li>
                    <li role="presentation"><a href="change-password.html"><i class="fa fa-key"></i>&nbsp;修改密码</a></li>
                </ul>
                <a href="#message" class="nav-header menu-first collapse navbar-collapse" data-toggle="collapse">
                    <i class="fa fa-comment"></i>&nbsp;消息通知
                </a>
                <ul class="nav nav-list collapse menu-second in " id="message">
                    <li role="presentation"><a href="message.html"><i class="fa fa-comments"></i>&nbsp;临时会话</a></li>
                    <li role="presentation"><a href="email.html"><i class="fa fa-envelope"></i>&nbsp;邮件系统</a></li>
                </ul>
                <a href="#manage" class="nav-header menu-first collapse navbar-collapse" data-toggle="collapse">
                    <i class="fa fa-wrench"></i>&nbsp;操作管理
                </a>
                <ul class="nav nav-list collapse menu-second in " id="manage">
                    <li><a href="record-in.html"><i class="fa fa-pencil"></i>&nbsp;信息录入</a></li>
                    <li><a href="file-upload.html"><i class="fa fa-upload"></i>&nbsp;文件上传</a></li>
                    <li><a href="activity-create.html"><i class="fa fa-plus"></i>&nbsp;活动创建</a></li>
                    <li><a href="activity-checkin.html"><i class="fa fa-paperclip"></i>&nbsp;活动审批</a></li>
                </ul>
                <a href="#data" class="nav-header menu-first collapse navbar-collapse" data-toggle="collapse"><i
                        class="fa fa-bar-chart"></i>&nbsp;数据分析</a>
                <ul class="nav nav-list collapse menu-second in " id="data">
                    <li><a href="data-chart.html"><i class="fa fa-pie-chart"></i>&nbsp;数据统计</a></li>
                    <li><a href="data-table.html"><i class="fa fa-table"></i>&nbsp;数据报表</a></li>
                    <li><a href="#"><i class="fa fa-pencil"></i>&nbsp;预留</a></li>
                </ul>
                <a href="#reserve" class="nav-header menu-first collapse navbar-collapse" data-toggle="collapse"><i
                        class="icon-book icon-large"></i>&nbsp;预留</a>
                <ul class="nav nav-list collapse menu-second " id="reserve">
                    <li><a href="#"><i class="fa fa-pencil"></i>&nbsp;one</a></li>
                    <li><a href="#"><i class="fa fa-pencil"></i>&nbsp;two</a></li>
                    <li><a href="#"><i class="fa fa-pencil"></i>&nbsp;>three</a></li>
                </ul>
            </nav>
        </div>
        <div class="col-lg-offset-2 col-lg-9 domain-part">
            <div class="content col-md-12">
                <div class="col-lg-12">
                    <div id="tablePanel" class="panel panel-primary">
                        <div class="panel-heading">
                            <a id="emailAll" class="btn btn-primary btn-sm" data-toggle="tooltip" title="email all"><i class="fa fa-envelope"></i></a>
                        </div>
                        <div class="panel-body">
                            <table id="studentsTable" class="table table-striped table-bordered" width="100%" cellspacing="0">
                                <thead>
                                <tr>
                                    <th>姓名</th>
                                    <th>性别</th>
                                    <th>电话</th>
                                    <th>邮箱</th>
                                    <th>报到日期</th>
                                    <th>报到状态</th>
                                    <th>交通工具</th>
                                    <th>通知</th>
                                </tr>
                                </thead>
                                <tfoot>
                                <tr>
                                    <th>姓名</th>
                                    <th>性别</th>
                                    <th>电话</th>
                                    <th>邮箱</th>
                                    <th>报到日期</th>
                                    <th>报到状态</th>
                                    <th>交通工具</th>
                                    <th>通知</th>
                                </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-1 right-part"></div>
    </div>
    <div class="footer"></div>
</div>

<script src="js/jquery-2.2.0.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.dataTables.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        var table = $('#studentsTable').DataTable( {
            "ajax": "data/objects.txt",
            "deferRender": true,
            "columnDefs": [ {
                "targets": 7,
                "data": null,
                "defaultContent": "<a  href='#'><i class='fa fa-envelope'></i></a>"
            } ],
            columns: [
                { "data": "name" },
                { "data": "sex" },
                { "data": "phone" },
                { "data": "email" },
                { "data": "date" },
                { "data": "status" },
                { "data": "vehicle" }
            ],
             dom: 'Bfrtip',
            buttons: [
                'copy', 'excel', 'pdf'
            ]
        } );

        $('#studentsTable tbody').on( 'click', 'a', function () {
            var data = table.row( $(this).parents('tr') ).data();
            location.href = "email.html?address="+data.email;
        } );

        $("#emailAll").on('click', function () {
            var columns=table.columns().data();
            var emails=columns[3];
            $.post('email.html',{address:emails},function(){
                location.href="email.html";
            });
        });
    });
</script>
</body>
</html>